FROM openjdk:17-jdk-slim

ARG GITHUB_APP_NAME
ARG GITHUB_APP_VERSION
ARG CSPR_POSTGRES_PASSWORD

ENV APP=$GITHUB_APP_NAME-$GITHUB_APP_VERSION".jar"
ENV POSTGRES_PASSWORD=$CSPR_POSTGRES_PASSWORD

COPY ./build/libs/$APP /home

WORKDIR /home

CMD java -jar $APP --spring.profiles.active=production --spring.datasource.password=$POSTGRES_PASSWORD
